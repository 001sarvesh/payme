<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Payment Link Generator</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 600px;
            margin: 0 auto;
        }

        .card {
            background: white;
            border-radius: 16px;
            padding: 30px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
            margin-bottom: 20px;
        }

        h1 {
            color: #333;
            margin-bottom: 10px;
            font-size: 28px;
        }

        .subtitle {
            color: #666;
            margin-bottom: 25px;
            font-size: 14px;
        }

        .form-group {
            margin-bottom: 20px;
        }

        label {
            display: block;
            margin-bottom: 8px;
            color: #333;
            font-weight: 500;
            font-size: 14px;
        }

        input, textarea {
            width: 100%;
            padding: 12px 15px;
            border: 2px solid #e0e0e0;
            border-radius: 8px;
            font-size: 15px;
            transition: border-color 0.3s;
            font-family: inherit;
        }

        input:focus, textarea:focus {
            outline: none;
            border-color: #667eea;
        }

        textarea {
            resize: vertical;
            min-height: 60px;
        }

        .button {
            width: 100%;
            padding: 14px;
            border: none;
            border-radius: 8px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
            margin-bottom: 10px;
        }

        .button-primary {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
        }

        .button-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 20px rgba(102, 126, 234, 0.4);
        }

        .button-secondary {
            background: #10b981;
            color: white;
        }

        .button-secondary:hover {
            background: #059669;
            transform: translateY(-2px);
        }

        .button-whatsapp {
            background: #25D366;
            color: white;
        }

        .button-whatsapp:hover {
            background: #20ba5a;
            transform: translateY(-2px);
        }

        .button:disabled {
            opacity: 0.5;
            cursor: not-allowed;
            transform: none !important;
        }

        .result-box {
            display: none;
            margin-top: 20px;
            padding: 20px;
            background: #f0fdf4;
            border: 2px solid #10b981;
            border-radius: 8px;
        }

        .result-box.show {
            display: block;
        }

        .payment-link {
            background: white;
            padding: 12px;
            border-radius: 6px;
            word-break: break-all;
            font-size: 13px;
            color: #333;
            margin: 15px 0;
            border: 1px solid #d1d5db;
        }

        .history-section {
            margin-top: 20px;
        }

        .history-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
        }

        .history-header h2 {
            font-size: 20px;
            color: #333;
        }

        .clear-history {
            padding: 8px 16px;
            background: #ef4444;
            color: white;
            border: none;
            border-radius: 6px;
            font-size: 13px;
            cursor: pointer;
            font-weight: 500;
        }

        .clear-history:hover {
            background: #dc2626;
        }

        .history-item {
            background: #f9fafb;
            padding: 15px;
            border-radius: 8px;
            margin-bottom: 10px;
            border-left: 4px solid #667eea;
        }

        .history-item-header {
            display: flex;
            justify-content: space-between;
            align-items: start;
            margin-bottom: 8px;
        }

        .history-item-name {
            font-weight: 600;
            color: #333;
            font-size: 15px;
        }

        .history-item-amount {
            font-weight: 700;
            color: #10b981;
            font-size: 16px;
        }

        .history-item-details {
            font-size: 13px;
            color: #666;
            margin-bottom: 4px;
        }

        .history-item-date {
            font-size: 12px;
            color: #999;
        }

        .no-history {
            text-align: center;
            color: #999;
            padding: 30px;
            font-size: 14px;
        }

        .config-notice {
            background: #fef3c7;
            border: 2px solid #f59e0b;
            border-radius: 8px;
            padding: 15px;
            margin-bottom: 20px;
            font-size: 14px;
            color: #92400e;
        }

        .config-notice strong {
            display: block;
            margin-bottom: 5px;
            color: #78350f;
        }

        @media (max-width: 640px) {
            .card {
                padding: 20px;
            }

            h1 {
                font-size: 24px;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="card">
            <h1>üí≥ Payment Link Generator</h1>
            <p class="subtitle">Generate professional UPI payment links instantly</p>

            <div class="config-notice" id="configNotice">
                <strong>‚ö†Ô∏è Setup Required</strong>
                Please update your UPI ID in the code (line 418) before using this tool.
            </div>

            <form id="paymentForm">
                <div class="form-group">
                    <label for="clientName">Client Name *</label>
                    <input type="text" id="clientName" required placeholder="Enter client name">
                </div>

                <div class="form-group">
                    <label for="amount">Amount (‚Çπ) *</label>
                    <input type="number" id="amount" required placeholder="Enter amount" min="1" step="0.01">
                </div>

                <div class="form-group">
                    <label for="purpose">Purpose / Description *</label>
                    <textarea id="purpose" required placeholder="E.g., Product purchase, Service fee, Consultation"></textarea>
                </div>

                <div class="form-group">
                    <label for="reference">Transaction Reference (Optional)</label>
                    <input type="text" id="reference" placeholder="E.g., Invoice #123, Order #456">
                </div>

                <button type="submit" class="button button-primary">Generate Payment Link</button>
            </form>

            <div class="result-box" id="resultBox">
                <h3 style="color: #059669; margin-bottom: 10px;">‚úÖ Payment Link Generated!</h3>
                <div class="payment-link" id="paymentLink"></div>
                <button class="button button-secondary" onclick="copyLink()">üìã Copy Link</button>
                <button class="button button-whatsapp" onclick="shareWhatsApp()">üì± Share on WhatsApp</button>
            </div>
        </div>

        <div class="card history-section">
            <div class="history-header">
                <h2>üìä Payment History</h2>
                <button class="clear-history" onclick="clearHistory()">Clear All</button>
            </div>
            <div id="historyList"></div>
        </div>
    </div>

    <script>
        // ============================================
        // CONFIGURATION - UPDATE YOUR UPI ID HERE
        // ============================================
        const CONFIG = {
            upiId: 'shuklasarvesh495@oksbi',  // Your UPI ID
            businessName: 'Thesisly',  // Your business name
        };

        // Check if UPI ID is configured
        window.addEventListener('load', () => {
            if (CONFIG.upiId === 'yourname@paytm') {
                document.getElementById('configNotice').style.display = 'block';
            } else {
                document.getElementById('configNotice').style.display = 'none';
            }
            loadHistory();
        });

        let currentPaymentLink = '';
        let currentClientName = '';

        // Generate UPI Payment Link
        document.getElementById('paymentForm').addEventListener('submit', function(e) {
            e.preventDefault();

            const clientName = document.getElementById('clientName').value.trim();
            const amount = document.getElementById('amount').value.trim();
            const purpose = document.getElementById('purpose').value.trim();
            const reference = document.getElementById('reference').value.trim();

            // Build transaction note
            let transactionNote = purpose;
            if (reference) {
                transactionNote += ` | Ref: ${reference}`;
            }

            // Generate UPI payment link
            const upiLink = `upi://pay?pa=${CONFIG.upiId}&pn=${encodeURIComponent(CONFIG.businessName)}&am=${amount}&tn=${encodeURIComponent(transactionNote)}&cu=INR`;

            currentPaymentLink = upiLink;
            currentClientName = clientName;

            // Display the link
            document.getElementById('paymentLink').textContent = upiLink;
            document.getElementById('resultBox').classList.add('show');

            // Save to history
            saveToHistory({
                clientName,
                amount,
                purpose,
                reference,
                date: new Date().toISOString(),
                link: upiLink
            });

            // Scroll to result
            document.getElementById('resultBox').scrollIntoView({ behavior: 'smooth', block: 'nearest' });
        });

        // Copy link to clipboard
        function copyLink() {
            navigator.clipboard.writeText(currentPaymentLink).then(() => {
                const btn = event.target;
                const originalText = btn.textContent;
                btn.textContent = '‚úÖ Copied!';
                btn.style.background = '#059669';
                setTimeout(() => {
                    btn.textContent = originalText;
                    btn.style.background = '';
                }, 2000);
            }).catch(err => {
                alert('Failed to copy. Please copy manually.');
            });
        }

        // Share via WhatsApp
        function shareWhatsApp() {
            const message = `Hi ${currentClientName},\n\nPlease complete your payment using this link:\n\n${currentPaymentLink}\n\nThank you!`;
            const whatsappUrl = `https://wa.me/?text=${encodeURIComponent(message)}`;
            window.open(whatsappUrl, '_blank');
        }

        // Save payment to history (localStorage)
        function saveToHistory(payment) {
            let history = JSON.parse(localStorage.getItem('paymentHistory') || '[]');
            history.unshift(payment);  // Add to beginning

            // Keep only last 50 entries
            if (history.length > 50) {
                history = history.slice(0, 50);
            }

            localStorage.setItem('paymentHistory', JSON.stringify(history));
            loadHistory();
        }

        // Load and display payment history
        function loadHistory() {
            const history = JSON.parse(localStorage.getItem('paymentHistory') || '[]');
            const historyList = document.getElementById('historyList');

            if (history.length === 0) {
                historyList.innerHTML = '<div class="no-history">No payment links generated yet</div>';
                return;
            }

            historyList.innerHTML = history.map(payment => {
                const date = new Date(payment.date);
                const formattedDate = date.toLocaleDateString('en-IN') + ' ' + date.toLocaleTimeString('en-IN', { hour: '2-digit', minute: '2-digit' });

                return `
                    <div class="history-item">
                        <div class="history-item-header">
                            <div class="history-item-name">${payment.clientName}</div>
                            <div class="history-item-amount">‚Çπ${payment.amount}</div>
                        </div>
                        <div class="history-item-details">üìù ${payment.purpose}</div>
                        ${payment.reference ? `<div class="history-item-details">üîñ Ref: ${payment.reference}</div>` : ''}
                        <div class="history-item-date">üïê ${formattedDate}</div>
                    </div>
                `;
            }).join('');
        }

        // Clear all history
        function clearHistory() {
            if (confirm('Are you sure you want to clear all payment history?')) {
                localStorage.removeItem('paymentHistory');
                loadHistory();
            }
        }
    </script>
</body>
</html>
